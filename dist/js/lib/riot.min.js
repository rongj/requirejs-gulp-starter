!function(e,t){"use strict";function h(e){var t=g(0),n=e.trim().slice(t.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/);return n?{key:n[1],pos:n[2],val:t+n[3]}:{val:e}}function y(e,t,n){var i={};return i[e.key]=t,e.pos&&(i[e.pos]=n),i}function b(e,t,n){A(e,"each");var p,i=S(e),r=e.outerHTML,o=!!U[i],u=U[i]||{tmpl:r},f=e.parentNode,a=document.createComment("riot placeholder"),s=[],l=O(e);f.insertBefore(a,e),n=h(n),t.one("premount",function(){f.stub&&(f=t.root),e.parentNode.removeChild(e)}).on("update",function(){var r=m(n.val,t);d(r)||(p=r?JSON.stringify(r):"",r=r?Object.keys(r).map(function(e){return y(n,e,r[e])}):[]);for(var g=document.createDocumentFragment(),v=s.length,h=r.length;v>h;)s[--v].unmount(),s.splice(v,1);for(v=0;v<h;++v){var b=!p&&n.key?y(n,r[v],v):r[v];s[v]?s[v].update(b):((s[v]=new _(u,{parent:t,isLoop:!0,hasImpl:o,root:c.test(i)?f:e.cloneNode(),item:b},e.innerHTML)).mount(),g.appendChild(s[v].root)),s[v]._item=b}f.insertBefore(g,a),l&&(t.tags[i]=s)}).one("updated",function(){var e=Object.keys(t);F(f,function(n){1!=n.nodeType||n.isLoop||n._looped||(n._visited=!1,n._looped=!0,z(n,t,e))})})}function w(e,t,n){F(e,function(e){if(1==e.nodeType){e.isLoop=e.isLoop||e.parentNode&&e.parentNode.isLoop||e.getAttribute("each")?1:0;var i=O(e);i&&!e.isLoop&&n.push(E(i,e,t)),e.isLoop||z(e,t,[])}})}function L(e,t,n){function i(e,t,i){if(t.indexOf(g(0))>=0){var r={dom:e,expr:t};n.push(k(r,i))}}F(e,function(e){var n=e.nodeType;if(3==n&&"STYLE"!=e.parentNode.tagName&&i(e,e.nodeValue),1==n){var r=e.getAttribute("each");return r?(b(e,t,r),!1):(C(e.attributes,function(t){var n=t.name,r=n.split("__")[1];if(i(e,t.value,{attr:r||n,bool:r}),r)return A(e,n),!1}),!O(e)&&void 0)}})}function _(e,r,o){function R(){var e=b&&y?s:h||s;C(A.attributes,function(t){c[t.name]=m(t.value,e)}),C(Object.keys(S),function(t){c[t]=m(S[t],e)})}function I(e){for(var t in _)typeof s[t]!==a&&(s[t]=e[t])}function V(){s.parent&&y&&C(Object.keys(s.parent),function(e){var t=!~l.indexOf(e)&&~F.indexOf(e);(typeof s[e]===a||t)&&(t||F.push(e),s[e]=s.parent[e])})}function z(e){if(C(x,function(t){t[e?"mount":"unmount"]()}),h){var t=e?"on":"off";y?h[t]("unmount",s.unmount):h[t]("update",s.update)[t]("unmount",s.unmount)}}var s=n.observable(this),c=q(r.opts)||{},p=v(e.tmpl),h=r.parent,y=r.isLoop,b=r.hasImpl,_=j(r.item),N=[],x=[],A=r.root,O=e.fn,E=A.tagName.toLowerCase(),S={},F=[];O&&A._tag&&A._tag.unmount(!0),this.isMounted=!1,A.isLoop=y,A._tag=this,this._id=i++,k(this,{parent:h,root:A,opts:c,tags:{}},_),C(A.attributes,function(e){var t=e.value;g(/{.*}/).test(t)&&(S[e.name]=t)}),p.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(E)&&(p.innerHTML=D(p.innerHTML,o)),this.update=function(e){e=j(e),V(),e&&typeof _===f&&(I(e),_=e),k(s,e),R(),s.trigger("update",e),T(N,s),s.trigger("updated")},this.mixin=function(){C(arguments,function(e){e=typeof e===u?n.mixin(e):e,C(Object.keys(e),function(t){"init"!=t&&(s[t]=M(e[t])?e[t].bind(s):e[t])}),e.init&&e.init.bind(s)()})},this.mount=function(){if(R(),O&&O.call(s,c),L(p,s,N),z(!0),(e.attrs||b)&&($(e.attrs,function(e,t){A.setAttribute(e,t)}),L(s.root,s,N)),s.parent&&!y||s.update(_),s.trigger("premount"),y&&!b)s.root=A=p.firstChild;else{for(;p.firstChild;)A.appendChild(p.firstChild);A.stub&&(s.root=A=h.root)}!s.parent||s.parent.isMounted?(s.isMounted=!0,s.trigger("mount")):s.parent.one("mount",function(){B(s.root)||(s.parent.isMounted=s.isMounted=!0,s.trigger("mount"))})},this.unmount=function(e){var r,n=A,i=n.parentNode;if(i){if(h)r=H(h),d(r.tags[E])?C(r.tags[E],function(e,t){e._id==s._id&&r.tags[E].splice(t,1)}):r.tags[E]=t;else for(;n.firstChild;)n.removeChild(n.firstChild);e?i.removeAttribute("riot-tag"):i.removeChild(n)}s.trigger("unmount"),z(),s.off("*"),A._tag=null},w(p,this,x)}function N(t,n,i,r){i[t]=function(t){var f,o=r._item,u=r.parent;if(!o)for(;u&&!o;)o=u._item,u=u.parent;t=t||e.event;try{t.currentTarget=i,t.target||(t.target=t.srcElement),t.which||(t.which=t.charCode||t.keyCode)}catch(a){}t.item=o,!0===n.call(r,t)||/radio|check/.test(i.type)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1),t.preventUpdate||(f=o?H(u):r,f.update())}}function x(e,t,n){e&&(e.insertBefore(n,t),e.removeChild(t))}function T(e,t){C(e,function(e,n){var i=e.dom,u=e.attr,a=m(e.expr,t),s=e.dom.parentNode;if(e.bool?a=!!a&&u:null==a&&(a=""),s&&"TEXTAREA"==s.tagName&&(a=(""+a).replace(/riot-/g,"")),e.value!==a){if(e.value=a,!u)return void(i.nodeValue=""+a);if(A(i,u),M(a))N(u,a,i,t);else if("if"==u){var c=e.stub,p=function(){x(i.parentNode,i,c)};a?c&&(!function(){x(c.parentNode,c,i)}(),i.inStub=!1,B(i)||F(i,function(e){e._tag&&!e._tag.isMounted&&(e._tag.isMounted=!!e._tag.trigger("mount"))})):(c=e.stub=c||document.createTextNode(""),i.parentNode?p():(t.parent||t).one("updated",p),i.inStub=!0)}else if(/^(show|hide)$/.test(u))"hide"==u&&(a=!a),i.style.display=a?"":"none";else if("value"==u)i.value=a;else if(J(u,r)&&u!=o)a&&i.setAttribute(u.slice(r.length),a);else{if(e.bool&&(i[u]=a,!a))return;typeof a!==f&&i.setAttribute(u,a)}}})}function C(e,t){for(var r,n=0,i=(e||[]).length;n<i;n++)null!=(r=e[n])&&!1===t(r,n)&&n--;return e}function M(e){return typeof e===s||!1}function A(e,t){e.removeAttribute(t)}function O(e){return e.tagName&&U[e.getAttribute(o)||e.tagName.toLowerCase()]}function E(e,t,n){var u,i=new _(e,{root:t,parent:n},t.innerHTML),r=S(t),o=H(n);return i.parent=o,u=o.tags[r],u?(d(u)||(o.tags[r]=[u]),~o.tags[r].indexOf(i)||o.tags[r].push(i)):o.tags[r]=i,t.innerHTML="",i}function H(e){for(var t=e;!O(t.root)&&t.parent;)t=t.parent;return t}function S(e){var t=O(e),n=e.getAttribute("name");return n&&n.indexOf(g(0))<0?n:t?t.name:e.tagName.toLowerCase()}function k(e){for(var t,n=arguments,i=1;i<n.length;++i)if(t=n[i])for(var r in t)e[r]=t[r];return e}function j(e){if(!(e instanceof _||e&&typeof e.trigger==s))return e;var t={};for(var n in e)~l.indexOf(n)||(t[n]=e[n]);return t}function F(e,t){if(e){if(!1===t(e))return;for(e=e.firstChild;e;)F(e,t),e=e.nextSibling}}function $(e,t){for(var n,i=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;n=i.exec(e);)t(n[1].toLowerCase(),n[2]||n[3]||n[4])}function B(e){for(;e;){if(e.inStub)return!0;e=e.parentNode}return!1}function R(e){return document.createElement(e)}function D(e,t){return e.replace(/<(yield)\/?>(<\/\1>)?/gi,t||"")}function I(e,t){return(t||document).querySelectorAll(e)}function V(e,t){return(t||document).querySelector(e)}function q(e){function t(){}return t.prototype=e,new t}function z(e,t,n){if(!e._visited){var i,r=e.getAttribute("id")||e.getAttribute("name");r&&(n.indexOf(r)<0&&(i=t[r],i?d(i)?i.push(e):t[r]=[i,e]:t[r]=e),e._visited=!0)}}function J(e,t){return e.slice(0,t.length)===t}function X(e){if(!n.render){W||(W=R("style"),W.setAttribute("type","text/css"));var t=document.head||document.getElementsByTagName("head")[0];if(W.styleSheet?W.styleSheet.cssText+=e:W.innerHTML+=e,!W._rendered)if(W.styleSheet)document.body.appendChild(W);else{var i=V("style[type=riot]");i?(i.parentNode.insertBefore(W,i),i.parentNode.removeChild(i)):t.appendChild(W)}W._rendered=!0}}function Y(e,t,n){var i=U[t],r=e._innerHTML=e._innerHTML||e.innerHTML;if(e.innerHTML="",i&&e&&(i=new _(i,{root:e,opts:n},r)),i&&i.mount)return i.mount(),P.push(i),i.on("unmount",function(){P.splice(P.indexOf(i),1)})}var n={version:"v2.2.4",settings:{}},i=0,r="riot-",o=r+"tag",u="string",f="object",a="undefined",s="function",c=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,l=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],p=0|(e&&e.document||{}).documentMode,d=Array.isArray;n.observable=function(e){e=e||{};var t={},n=0;return e.on=function(i,r){return M(r)&&(typeof r.id===a&&(r._id=n++),i.replace(/\S+/g,function(e,n){(t[e]=t[e]||[]).push(r),r.typed=n>0})),e},e.off=function(n,i){return"*"==n?t={}:n.replace(/\S+/g,function(e){if(i)for(var o,n=t[e],r=0;o=n&&n[r];++r)o._id==i._id&&n.splice(r--,1);else t[e]=[]}),e},e.one=function(t,n){function i(){e.off(t,i),n.apply(e,arguments)}return e.on(t,i)},e.trigger=function(n){for(var u,i=[].slice.call(arguments,1),r=t[n]||[],o=0;u=r[o];++o)u.busy||(u.busy=1,u.apply(e,u.typed?[n].concat(i):i),r[o]!==u&&o--,u.busy=0);return t.all&&"all"!=n&&e.trigger.apply(e,["all",n].concat(i)),e},e},n.mixin=function(){var e={};return function(t,n){if(!n)return e[t];e[t]=n}}(),function(e,t,n){function f(){return i.href.split("#")[1]||""}function a(e){return e.split("/")}function s(e){e.type&&(e=f()),e!=u&&(r.trigger.apply(null,["H"].concat(a(e))),u=e)}if(n){var u,i=n.location,r=e.observable(),o=!1,c=e.route=function(e){e[0]?(i.hash=e,s(e)):r.on("H",e)};c.exec=function(e){e.apply(null,a(f()))},c.parser=function(e){a=e},c.stop=function(){o&&(n.removeEventListener?n.removeEventListener(t,s,!1):n.detachEvent("on"+t,s),r.off("*"),o=!1)},c.start=function(){o||(n.addEventListener?n.addEventListener(t,s,!1):n.attachEvent("on"+t,s),o=!0)},c.start()}}(n,"hashchange",e);var W,g=function(e){var t,i,r,o=/[{}]/g;return function(u){var f=n.settings.brackets||"{ }";return t!==f&&(t=f,r=f.split(" "),i=r.map(function(e){return e.replace(/(?=.)/g,"\\")})),u instanceof RegExp?"{ }"===f?u:new RegExp(u.source.replace(o,function(e){return i[~~("}"===e)]}),u.global?"g":""):r[u]}}(),m=function(){function r(e,t){return e.indexOf(g(0))<0?(e=e.replace(/\n|\r\n?/g,"\n"),function(){return e}):(e=e.replace(g(/\\{/g),"￰").replace(g(/\\}/g),"￱"),t=f(e,a(e,g(/{/),g(/}/))),e=2!==t.length||t[0]?"["+t.map(function(e,t){return t%2?o(e,!0):'"'+e.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':o(t[1]),new Function("d","return "+e.replace(/\uFFF0/g,g(0)).replace(/\uFFF1/g,g(1))+";"))}function o(e,t){return e=e.replace(/\n|\r\n?/g," ").replace(g(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(e)?"["+a(e,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(e){return e.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(e,t,n){return n.replace(/[^&|=!><]+/g,u)+'?"'+t+'":"",'})}).join("")+'].join(" ").trim()':u(e,t)}function u(e,t){return e=e.trim(),e?"(function(v){try{v="+e.replace(i,function(e,t,i){return i?'(("'+i+n+i+")":e})+"}catch(e){}return "+(!0===t?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function f(e,t){var n=[];return t.map(function(t,i){i=e.indexOf(t),n.push(e.slice(0,i),t),e=e.slice(i+t.length)}),e&&n.push(e),n}function a(e,t,n){var i,r=0,o=[],u=new RegExp("("+t.source+")|("+n.source+")","g");return e.replace(u,function(t,n,u,f){!r&&n&&(i=f),(r+=n?1:-1)||null==u||o.push(e.slice(i,f+u.length))}),o}var t={},n='"in d?d:'+(e?"window).":"global)."),i=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g;return function(e,n){return e&&(t[e]||(t[e]=r(e)))(n)}}(),v=function(e){function i(i){var o=i&&i.match(/^\s*<([-\w]+)/),u=o&&o[1].toLowerCase(),f=t[u]||n,a=R(f);return a.stub=!0,e&&u&&(o=u.match(c))?r(a,i,u,!!o[1]):a.innerHTML=i,a}function r(e,t,i,r){var f,o=R(n),u=r?"select>":"table>";o.innerHTML="<"+u+t+"</"+u,(f=o.getElementsByTagName(i)[0])&&e.appendChild(f)}var t={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},n="div";return e=e&&e<10,i}(p),P=[],U={};n.tag=function(e,t,n,i,r){return M(i)&&(r=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(M(n)?r=n:X(n)),U[e]={name:e,tmpl:t,attrs:i,fn:r},e},n.mount=function(e,t,n){function s(e){var t="";return C(e,function(e){t+=", *["+o+'="'+e.trim()+'"]'}),t}function c(){var e=Object.keys(U);return e+s(e)}function l(e){var i;if(e.tagName){!t||(i=e.getAttribute(o))&&i==t||e.setAttribute(o,t);var r=Y(e,t||e.getAttribute(o)||e.tagName.toLowerCase(),n);r&&a.push(r)}else e.length&&C(e,l)}var i,r,a=[];if(typeof t===f&&(n=t,t=0),typeof e===u?("*"===e?e=r=c():e+=s(e.split(",")),i=I(e)):i=e,"*"===t){if(t=r||c(),i.tagName)i=I(t,i);else{var p=[];C(i,function(e){p.push(I(t,e))}),i=p}t=0}return i.tagName?l(i):C(i,l),a},n.update=function(){return C(P,function(e){e.update()})},n.mountTo=n.mount,n.util={brackets:g,tmpl:m},typeof exports===f?module.exports=n:"function"==typeof define&&define.amd?define(function(){return e.riot=n}):e.riot=n}("undefined"!=typeof window?window:void 0);